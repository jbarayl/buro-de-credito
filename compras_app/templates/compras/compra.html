{% extends "base.html" %}
{% block title %}Inicio{% endblock %}

<!-- CSS Code -->
{% block style_css %}
<style type="text/css">
  .delete-row {
    margin-left:5px;
  }
</style>

<link rel='stylesheet' href='{{STATIC_URL}}css/redmond/jquery-ui-1.8.23.custom.css'/>

{% endblock %}

<!-- JavaScript Code -->
{% block js_code %}
<script type="text/javascript">
    // Define this so we don't have to bother with the admin jsi18n stuff:
    function gettext(msgid) { return msgid; }
</script>
<script src='{{STATIC_URL}}js/jquery.formset.js'></script>
<script type="text/javascript">
$(function() {
  
  $('#id_doctosIn_table tbody tr input[name$=fecha]').attr('readonly', 'readonly'); 
  $('input[name=fecha]').datetimepicker({ dateFormat: 'dd/mm/yy',});
  $('input[name$=fecha_limite]').datetimepicker({ dateFormat: 'dd/mm/yy',});
  
  $('input[name$=cantidad]').addClass('span1');
  $('input[name$=adeudo]').addClass('span1');
// .attr('text-align','left');
  $('#id_doctosIn_table tbody tr').formset({
    prefix: '{{ formset.prefix }}',
    addCssClass:'btn btn-success',
    addText:'Nuevo Pago',
    deleteText:'',
  });
});
</script>

{% endblock %}
{% block breadcrumb %}{{ block.super }} <a href="/">Compras</a> > Compra{% endblock %}
{% block content %}

<form method="post" class="form-horizontal" action="" width="300px"  enctype='multipart/form-data'>
  {% csrf_token %}
  <div class="form-actions">
    <input type="submit" class="btn btn-primary" value="Guardar y Salir" />
  </div>
    {{ compra_form.errors }}
  
   <div class="control-group">
    <label class="control-label" for="id_folio"></label>
    <div class="controls">
      Cliente {{ compra_form.cliente }} Tipo {{ compra_form.tipo_prestamo }} Estado {{ compra_form.estado }} 
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="id_descripcion"></label>
    <div class="controls">
      Fecha Inicio {{ compra_form.fecha }} Limite {{ compra_form.fecha_limite }}
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="id_almacen">Sucursal</label>
    <div class="controls">
      Sucursal {{ compra_form.sucursal }} 
      <div class="input-prepend input-append">
        Cantidad Total 
        <span class="add-on">$</span>
        {{ compra_form.cantidad }}
        <span class="add-on">.00</span>
      </div> 
       <div class="input-prepend input-append">
        Debe 
        <span class="add-on">$</span>
        {{ compra_form.adeudo }}
        <span class="add-on">.00</span>
      </div>
    </div>
  </div>
  {{ formset.total_form_count }} Pagos
  
  <hr>
  
  <div id="doctosIn_data">
    <fieldset>
      <table class="table tableCell table-hover" id="id_doctosIn_table" border="0" cellpadding="0" cellspacing="5">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Cantidad</th>
            <th>Descripcion</th>
          </tr>
        </thead>
        <tbody>
          {% for form in formset.forms %}
          <tr id="{{ form.prefix }}-row" class="form-container">
            {{ form.errors }}
            <td>{% if form.instance.pk %}{{ form.DELETE }}{% endif %}
              {{ form.fecha }}
            </td>
            <td>
              <div class="input-prepend input-append">
                <span class="add-on">$</span>
                {{ form.cantidad }}
                <span class="add-on">.00</span>
              </div>
              {% for fld in form.hidden_fields %}{{ fld }}{% endfor %}
            </td>
            <td>{{ form.descripcion }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </fieldset>
    {{ formset.management_form }}
  </div>
  <div class="form-actions">
    <input type="submit" class="btn btn-primary" value="Guardar y Salir" />
  </div>
</form>

{% include 'autocomplete_light/static.html' %}
{% endblock %}